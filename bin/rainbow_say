#!/usr/bin/env ruby
STDOUT.sync = true
trap("SIGINT") { exit! }

say = if ARGV.any?
  ARGV.join " "
elsif !(stdin = STDIN.read).empty?
  stdin.chomp
end

if say
  loop do
    STDOUT.print "\r\x1b[#{31+($.+=1)%7}m#{say}"
    STDOUT.print "\e[0m"
    sleep 0.3
  end
else
  puts "Usage: rainbow_say <something witty>"
end
